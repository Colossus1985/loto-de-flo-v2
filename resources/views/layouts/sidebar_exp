<?php
$user_id = isset($_SERVER['AUTHENTICATE_SAMACCOUNTNAME'])   ? strtolower($_SERVER['AUTHENTICATE_SAMACCOUNTNAME'])  : '';    // login (initiales)
$user_ok = $user_id == 'pr' || $user_id == 'eba' || $user_id == 'sgreiner' || $user_id == 'sg' ? true : false;
// Pour tests docker en local
$local = stripos($_SERVER['HTTP_HOST'], 'localhost')!==false ? true : false;
$user_ok = $local ? true : $user_ok;
?>

<!-- Main Sidebar Container -->
<aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a href="/" class="ps-3 brand-link">
      <img src="{{asset('img/logo-dl-rs.png')}}" alt="Digilife" class="brand-image img-circle elevation-3">
      <span class="brand-text ms-4">WEB</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->

{{-- ########################################################################################################### --}}
            <li id="main_cmd_web" class="nav-item{{ Request::segment(1) === 'cmde' ? ' menu-is-opening menu-open' : null }}">
                {{-------------------------------------------------------------------------- 
                    COMMANDES WEB
                --------------------------------------------------------------------------}}
                <a href="#" class="nav-link">
                    {{-- <i class="nav-icon fa fa-circle text-yellow"></i> --}}
                    <p>
                        COMMANDES WEB
                        <i class="right fa text-yellow"></i>
                    </p>
                </a>

                <ul class="nav nav-treeview pl-3">
                    </ul>
                <ul class="nav nav-treeview pl-3">
                    {{-- TOUTES LES COMMANDES --}}
                    <li class="nav-item">
                        <a href="{{ route('cmdWeb' ,['ALL' ,'ALL']) }}" class="nav-link {{Route::currentRouteNamed('cmdWeb') && Request::segment(3) === 'ALL' ? ' active' : ''}}">
                            <p>
                                Toutes les commandes
                            </p>
                        </a>
                    </li>
                    {{-- MARTINIQUE --}}
                    <li class="nav-item{{ Request::segment(3) === 'MQ' ? ' menu-is-opening menu-open' : null }}">
                        <a href="#" class="nav-link">
                        <i class="nav-icon fa fa-plus text-yellow text-S"></i>
                        <p>
                            Martinique
                            <i class="right fas"></i>
                        </p>
                        </a>
                        <ul class="nav nav-treeview pl-3">
                            <li class="nav-item ">
                                <a href="{{ route('cmdWeb' ,['MQ' ,'ALL']) }}" class="nav-link {{Route::currentRouteNamed('cmdWeb') && Request::segment(3) === 'MQ' ? ' active' : ''}}">
                                    <i class="fa fa-shop nav-icon text-S"></i>
                                    <p>
                                        Commandes
                                        <i class="right fas"></i>
                                    </p>
                                </a>
                            </li>
                            <li class="nav-item{{ Request::segment(2) === 'livraison' && Request::segment(3) === 'MQ' ? ' menu-is-opening menu-open' : null }}">
                                <a href="#" class="nav-link">
                                    <i class="fa fa-truck nav-icon text-S"></i>
                                    <p>
                                        Livraisons
                                        <i class="right fas"></i>
                                    </p>
                                </a>
                                <ul class="nav nav-treeview pl-3">
                                    <li class="nav-item">
                                        <a href="{{ route('getCommandes' ,'MQ') }}" class="nav-link{{(Route::currentRouteNamed('getCommandes') || Route::currentRouteNamed('getDetailsCmdLiv')) && Request::segment(3) === 'MQ' ? ' active' : ''}}">
                                            <i class="fa fa-angle-right nav-icon"></i>
                                            <p>Demandes livraisons</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="{{ route('gpxRemiseListe' ,'MQ') }}" class="nav-link{{Route::currentRouteNamed('gpxRemiseListe') && Request::segment(3) === 'MQ' ? ' active' : ''}}">
                                            <i class="fa fa-angle-right nav-icon"></i>
                                            <p>SCAN colis</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="{{ route('gpxSuiviAll' ,'MQ') }}" class="nav-link{{Route::currentRouteNamed('gpxSuiviAll') && Request::segment(3) === 'MQ' ? ' active' : ''}}">
                                            <i class="fa fa-angle-right nav-icon"></i>
                                            <p>Suivi livraisons</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    
                    {{-- GUADELOUPE --}}
                    <li class="nav-item{{ Request::segment(3) === 'GP' ? ' menu-is-opening menu-open' : null }}">
                        <a href="#" class="nav-link">
                            <i class="nav-icon fa fa-plus text-green text-S"></i>
                            <p>
                                Guadeloupe
                                <i class="right fas"></i>
                            </p>
                        </a>
                        <ul class="nav nav-treeview pl-3">
                            <li class="nav-item ">
                                <a href="{{ route('cmdWeb' ,['GP' ,'ALL']) }}" class="nav-link {{Route::currentRouteNamed('cmdWeb') && Request::segment(3) === 'GP' ? ' active' : ''}}">
                                    <i class="fa fa-shop nav-icon text-S"></i>
                                    <p>
                                        Commandes
                                        <i class="right fas"></i>
                                    </p>
                                </a>
                            </li>
                            <li class="nav-item{{ Request::segment(2) === 'livraison' && Request::segment(3) === 'GP' ? ' menu-is-opening menu-open' : null }}">
                                <a href="#" class="nav-link">
                                    <i class="fa fa-truck nav-icon text-S"></i>
                                    <p>
                                        Livraisons
                                        <i class="right fas"></i>
                                    </p>
                                </a>
                                <ul class="nav nav-treeview pl-3">
                                    <li class="nav-item">
                                        <a href="{{ route('getCommandes' ,'GP') }}" class="nav-link{{(Route::currentRouteNamed('getCommandes') || Route::currentRouteNamed('getDetailsCmdLiv')) && Request::segment(3) === 'GP' ? ' active' : ''}}">
                                            <i class="fa fa-angle-right nav-icon"></i>
                                            <p>Demandes livraisons</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="{{ route('gpxRemiseListe' ,'GP') }}" class="nav-link{{Route::currentRouteNamed('gpxRemiseListe') && Request::segment(3) === 'GP' ? ' active' : ''}}">
                                            <i class="fa fa-angle-right nav-icon"></i>
                                            <p>SCAN colis</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="{{ route('gpxSuiviAll' ,'GP') }}" class="nav-link{{Route::currentRouteNamed('gpxSuiviAll') && Request::segment(3) === 'GP' ? ' active' : ''}}">
                                            <i class="fa fa-angle-right nav-icon"></i>
                                            <p>Suivi livraisons</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    {{-- STATS --}}
                    <li class="nav-item{{ Request::segment(3) === 'stat' ? ' menu-is-opening menu-open' : null }}">
                        <a href="#" class="nav-link">
                            <i class="fa fa-area-chart text-yellow text-S"></i> 
                            <p class="ms-2">
                                Stats
                            </p>
                        </a>
                        <ul class="nav nav-treeview pl-3">
                            <li class="nav-item ">
                                <a href="{{ route('digilifeStatEvolution') }}" class="nav-link {{ Request::segment(3) === 'stat' ? ' menu-is-opening menu-open' : null }}">
                                    <i class="fa-solid fa-signal text-S"></i>
                                    <p class="ms-2">
                                        Evolution
                                        <i class="right fas"></i>
                                    </p>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            
                {{-------------------------------------------------------------------------- 
                    PIM
                --------------------------------------------------------------------------}}
                <li  id="main_cmd_web" class="nav-item{{ Request::segment(1) === 'pim' ? ' menu-is-opening menu-open' : null }}">
                    <a href="#" class="nav-link">
                        <p>PIM</p>
                    </a>
                    <ul class="nav nav-treeview pl-3">
                        <li class="nav-item">
                            <a href="{{ route('pimProduitListe') }}" class="nav-link {{Route::currentRouteNamed('pimProduitListe') && Request::segment(1) === 'pim' ? ' active' : ''}}">
                                <p>
                                    Liste des produits
                                </p>
                            </a>
                        </li>
                    </ul>
                </li>  

                {{-- 
                -------------------------------------------------------------------------- 
                    MIGRATIONS
                --------------------------------------------------------------------------
                <li  id="main_cmd_web" class="nav-item{{ Request::segment(1) === 'migration' ? ' menu-is-opening menu-open' : null }}">
                    <a href="#" class="nav-link">
                        <p>
                            MIGRATIONS 
                            <i class="right fa text-yellow"></i>
                        </p>
                    </a>

                    <ul class="nav nav-treeview pl-3">
                        <li class="nav-item">
                            <a href="{{ route('transfertFabricant') }}" class="nav-link {{Route::currentRouteNamed('migration') && Request::segment(2) === 'fabricants' ? ' active' : ''}}">
                                <i class="fa-solid fa-left-right"></i>
                                <p>
                                    Fabricants
                                </p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link {{Route::currentRouteNamed('migration') && Request::segment(2) === 'categories' ? ' active' : ''}}">
                                <i class="fa-solid fa-left-right"></i>
                                <p>
                                    Catégories
                                </p>
                            </a>
                        </li>
                    </ul>
                </li>  
                --}}
            

                {{-------------------------------------------------------------------------- 
                    QUICK
                --------------------------------------------------------------------------}}
                @if ($user_ok)
                <li  id="main_cmd_web" class="nav-item{{ Request::segment(1) === 'quick' ? ' menu-is-opening menu-open' : null }}">
                    <a href="#" class="nav-link">
                        <p>
                            QUICK 
                        </p>
                    </a>

                    <ul class="nav nav-treeview pl-3">
                        <li class="nav-item">
                            <a href="{{ route('quickDashboard') }}" class="nav-link {{Route::currentRouteNamed('quickDashboard') && Request::segment(1) === 'quick' ? ' active' : ''}}">
                                <p>
                                    Requêtes rapides
                                </p>
                            </a>
                        </li>
                    </ul>
                </li>  
                @endif

                {{-------------------------------------------------------------------------- 
                    OUTILS
                --------------------------------------------------------------------------}}
                @if ($user_ok)
                    <li  id="main_cmd_web" class="nav-item{{ Request::segment(1) === 'outils' ? ' menu-is-opening menu-open' : null }}">
                        <a href="#" class="nav-link">
                            <p>
                            OUTILS 
                            </p>
                        </a>

                        <ul class="nav nav-treeview pl-3">
                            <li class="nav-item">
                                <a href="{{ route('outilsHelpCreate') }}" class="nav-link {{Route::currentRouteNamed('outilsHelpCreate') && Request::segment(1) === 'outils' ? ' active' : ''}}">
                                    <p>
                                        MAJ routes pour aide
                                    </p>
                                </a>
                            </li>
                            @if ($user_ok)
                                <li class="nav-item">
                                    <a href="{{ route('outilsSlider') }}" class="nav-link {{Route::currentRouteNamed('outilsSlider') && Request::segment(1) === 'outils' ? ' active' : ''}}">
                                        <p>
                                            Slider Digilife
                                        </p>
                                    </a>
                                </li>
                            @endif
                        </ul>
                    </li> 
                @endif 
                @if ($user_ok)
                {{-------------------------------------------------------------------------- 
                        OPERATIONS
                    --------------------------------------------------------------------------}}
                    <li id="main_cmd_web" class="nav-item{{ Request::segment(1) === 'op' ? ' menu-is-opening menu-open' : null }}">
                        <a href="#" class="nav-link">
                            {{-- <i class="nav-icon fa fa-circle text-yellow"></i> --}}
                            <p>
                                OPERATIONS
                                <i class="right fa text-yellow"></i>
                            </p>
                        </a>
                        <ul class="nav nav-treeview pl-3">
                            <li class="nav-item">
                                <a href="{{ route('getListClientOpFree') }}" class="nav-link {{Route::currentRouteNamed('getListClientOpFree') && Request::segment(1) === 'op' ? ' active' : ''}}">
                                    <p>
                                        Free
                                    </p>
                                </a>
                            </li>
                        </ul>
                    </li>
                @endif

{{-- ############################################################################################################## --}}
            </ul>
        </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
<?php 
/*
echo '<div class="text-blanc">';
echo "0 : ".Request::segment(0)."<br>";
echo "1 : ".Request::segment(1)."<br>";
echo "2 : ".Request::segment(2)."<br>";
echo "3 : ".Request::segment(3)."<br>";
echo "4 : ".Request::segment(4)."<br>";
echo "5 : ".Request::segment(5)."<br>";
echo "6 : ".Request::segment(6)."<br>";
echo "7 : ".Request::segment(7)."<br>";
echo '</div>';
//exit();
*/
?>
</aside>